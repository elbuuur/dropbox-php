#### Для работы с файлами используется laravel-medialibrary v.10
конфигурация библиотеки лежит по пути _config/media-library.php_ (
`max_file_size` - регулируется размер загружаемого файла)

Если объявить в файле .env переменную `MAX_FILE_SIZE` , то можно установить собственный лимит. По дефолту значение = 20 мб.

#### Документация по API методам

Для создания Документации по методам API используется инструмент автоматической генерации документации Swagger.


С помощью команды `sail artisan l5-swagger:generate`
происходит генерация документации. 

Если объявить в файле .env переменную `L5_SWAGGER_GENERATE_ALWAYS=true`, то
документация будет генерироваться автоматически. 

Также в .env файле нужно определить переменную `SWAGGER_API_BASEURL=http://localhost/api`.


На данный момент все методы лежат в одном разделе: [http://localhost/api/documentation#/](http://localhost/api/documentation#/)

#### Максимальный лимит объема всех файлов на диске одного пользователя

логика описана в `app/Http/Middleware/CheckFileUploadLimitMiddleware.php`

Если объявить в файле .env переменную `UPLOAD_LIMIT` , то можно установить собственный лимит. По дефолту значение = 100 мб.

в таблице `users` в столбце `upload_limit` фиксируется вес **уже загруженных файлов пользователя**


#### Крон-файлы

При загрузке файла,  есть возможность указать срок хранения файла, после которого он сам удаляется (поле `shelf_life`).

в `app/Console/Kernel.php` лежит скрипт, который каждый час проверяет доступные файлы для удаления и удаляет их.

для выполнения крона необходимо в терминале выполнить команду `sail artisan schedule:run`


#### Кеширование

Осуществляется при помощи redis. 
Кешируются файлы (по id, на 2 ч) и данные о пользователе (2 ч).

время кеширования можно изменить через .env файл, ключи `USER_CACHE_TIME` и `FILE_CACHE_TIME`

ключи, теги а также дефолтное значение времени кеширования (если не указать иное в .env) определяется в файле `config/constants.php`

при разворачивании проекта может возникнуть проблема с соединением redis: в файле .env необходимо установить значение `CACHE_DRIVER=redis`
